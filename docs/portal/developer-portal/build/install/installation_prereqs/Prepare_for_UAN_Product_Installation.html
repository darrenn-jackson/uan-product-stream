<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><title>Prepare for UAN Product Installation</title><link rel="stylesheet" type="text/css" href="../css/commonltr.css"><link rel="stylesheet" type="text/css" href="../css/css_parent.css"></head><body id="prepare-for-uan-product-installation"><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Prepare for UAN Product Installation</h1><div class="body"><p class="p">Perform this procedure to ready the HPE Cray EX supercomputer for UAN product installation.</p><p class="p">Install and configure the COS product before performing this procedure.</p><ol class="ol"><li class="li"><p class="p">Verify that the management network switches are properly configured.</p><p class="p">Refer to the <a class="xref github-link" href="https://github.com/Cray-HPE/docs-csm/tree/release/1.0/install" target="_blank" rel="external noopener">switch configuration procedures</a> in the HPE Cray System Management Documentation.</p></li><li class="li"><p class="p">Ensure that the management network switches have the proper firmware.</p><p class="p">Refer to the procedure "Update the Management Network Firmware" in the HPE Cray EX hardware documentation.</p></li><li class="li"><p class="p">Ensure that the host reservations for the UAN CAN/CHN network have been properly set.</p><p class="p">Refer to the procedure "Add UAN CAN IP Addresses to SLS" in the HPE Cray EX hardware documentation.</p></li><li class="li"><p class="p">Configure the BMC of the UAN.</p><p class="p">Perform <a class="xref" href="Configure_the_BMC_for_UANs_with_iLO.html#configure-the-bmc-for-uans-with-ilo">Configure the BMC for UANs with iLO</a> if the UAN is a HPE server with an iLO.</p></li><li class="li"><p class="p">Configure the BIOS of the UAN.</p><ul class="ul"><li class="li"><p class="p">Perform <a class="xref" href="Configure_the_BIOS_of_an_HPE_UAN.html#configure-the-bios-of-an-hpe-uan">Configure the BIOS of an HPE UAN</a> if the UAN is a HPE server with an iLO.</p></li><li class="li"><p class="p">Perform <a class="xref" href="Configure_the_BIOS_of_a_Gigabyte_UAN.html#configure-the-bios-of-a-gigabyte-uan">Configure the BIOS of a Gigabyte UAN</a> if the UAN is a Gigabyte server.</p></li></ul></li><li class="li"><p class="p">Verify that the firmware for each UAN BMC meets the specifications.</p><p class="p">Use the System Admin Toolkit firmware command to check the current firmware version on a UAN node.</p><pre class="pre codeblock bash"><code>ncn-m001# sat firmware -x BMC_XNAME</code></pre></li><li class="li"><p class="p">Repeat the previous six Steps for all UANs.</p></li><li class="li"><p class="p">Unpackage the file.</p><pre class="pre codeblock bash"><code>ncn-m001# tar zxf uan-PRODUCT_VERSION.tar.gz</code></pre></li><li class="li"><p class="p">Navigate into the uan-PRODUCT_VERSION/ directory.</p><pre class="pre codeblock bash"><code>ncn-m001# cd uan-PRODUCT_VERSION/</code></pre></li><li class="li"><p class="p">Run the pre-install goss tests to determine if the system is ready for the UAN product installation.</p><p class="p">This requires that goss is installed on the node running the tests.</p><pre class="pre codeblock bash"><code>ncn# ./validate-pre-install.sh
...............

Total Duration: 1.304s
Count: 15, Failed: 0, Skipped: 0</code></pre></li><li class="li"><p class="p">Ensure that the <code class="ph codeph">cray-console-node</code> pods are connected to UANs so that they are monitored and their consoles are logged.</p><ol class="ol" type="a"><li class="li"><p class="p">Obtain a list of the xnames for all UANs (remove the <code class="ph codeph">--subrole</code> argument to list all Application nodes).</p><pre class="pre codeblock bash"><code>ncn# cray hsm state components list --role Application --subrole UAN --format json | jq -r .Components[].ID | sort
x3000c0s19b0n0
x3000c0s24b0n0
x3000c0s31b0n0</code></pre></li><li class="li"><p class="p">Obtain a list of the console pods.</p><pre class="pre codeblock bash"><code>ncn# PODS=$(kubectl get pods -n services -l app.kubernetes.io/name=cray-console-node --template '{{range .items}}{{.metadata.name}} {{end}}')</code></pre></li><li class="li"><p class="p">Use <code class="ph codeph">conman -q</code> to scan the list of connections being monitored by conman (only UAN xnames are shown for brevity).</p><pre class="pre codeblock"><code>ncn# for pod in $PODS; do kubectl exec -n services -c cray-console-node $pod -- conman -q; done
x3000c0s19b0n0
x3000c0s24b0n0
x3000c0s31b0n0</code></pre><p class="p">If a console connection is not present, the install may continue, but a console connection should be established before attempting to boot the UAN.</p></li></ol></li></ol><p class="p">Next, install the UAN product by performing the procedure <a class="xref" href="../install/Install_the_UAN_Product_Stream.html#install-the-uan-product-stream">Install the UAN Product Stream</a>.</p></div><nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../installation_prereqs/Hardware_and_Software_Prerequisites.html">Hardware and Software Prerequisites</a></div></div></nav></article></main></body></html>